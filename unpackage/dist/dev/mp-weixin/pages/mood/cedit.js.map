{"version":3,"file":"cedit.js","sources":["../../../../../../pages/mood/cedit.vue","C:/Program Files/HBuilderX/HBuilderX.2.9.8.20201110/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbW9vZC9jZWRpdC52dWU"],"sourcesContent":["<template>\n  <view class=\"col_nw_fs_center ce_one_box_one\">\n    <TopNavBack :isBlueMode=\"true\"></TopNavBack>\n    <view class=\"top_hgap\"></view>\n    <scroll-view\n      class=\"ce_one_box_two\"\n      scroll-y=\"true\"\n      show-scrollbar=\"false\"\n      enable-flex=\"true\"\n      @scrolltolower=\"scrollHandle\"\n    >\n      <view class=\"col_nw_fs_fs ce_one_box_three\">\n        <view style=\"flex: 1; width: 100%\">\n          <view style=\"border: 1px solid #ccc\">\n            <view id=\"editorToolbar\" style=\"border-bottom: 1px solid #ccc; min-height: 20px\"></view>\n            <view id=\"editorTextarea\" style=\"height: 400px\"></view>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nimport {\n  defineComponent,\n  reactive,\n  onBeforeUnmount,\n  ref,\n  shallowRef,\n  onMounted,\n  getCurrentInstance,\n} from \"vue\";\nimport TopNavBack from \"@/components/common/TopNavBack.vue\";\nimport \"@wangeditor/editor/dist/css/style.css\"; // 引入 css\nimport { createEditor, DomEditor, createToolbar, i18nChangeLanguage } from \"@wangeditor/editor\";\n\nexport default defineComponent({\n  name: \"Login\",\n  components: { TopNavBack },\n  setup() {\n    let currentPage = 0;\n    function scrollHandle() {\n      currentPage++;\n    }\n\n    let inputFeatureEditor = null;\n    let inputFeatureToolbar = null;\n    let inputRichCtx = \"\";\n\n    onMounted(() => {\n      initEditor();\n    });\n\n    // 组件销毁时，也及时销毁编辑器\n    onBeforeUnmount(() => {\n      if (inputFeatureEditor == null) {\n        return;\n      } else {\n        inputFeatureEditor.blur();\n        setTimeout(() => {\n          inputFeatureEditor.destroy();\n          inputFeatureEditor = null;\n          inputFeatureToolbar = null;\n        }, 100);\n      }\n    });\n\n    function initEditor() {\n      // #ifdef H5 || APP-PLUS\n      inputFeatureEditor = createEditor({\n        selector: \"#editorTextarea\",\n        config: {\n          placeholder: \"Type here...\",\n          autoFocus: false,\n          MENU_CONF: {\n            uploadImage: {\n              fieldName: \"your-file-name1\",\n              base64LimitSize: 10 * 1024 * 1024, // 10M 以下插入 base64\n            },\n          },\n          onChange(editor) {\n            inputRichCtx = editor.getHtml();\n          },\n        },\n        html: inputRichCtx,\n      });\n      inputFeatureToolbar = createToolbar({\n        editor: inputFeatureEditor,\n        selector: \"#editorToolbar\",\n        config: {},\n      });\n\n      // #endif\n\n      // #ifdef MP-WEIXIN\n      const instance = getCurrentInstance();\n      const query = uni.createSelectorQuery().in(instance.proxy);\n\n      query.select(\"#editorTextarea\").fields(\n        {\n          id: true, //是否返回节点id\n          rect: false, //是否返回节点布局位置\n          dataset: true, //返回数据集\n          size: true, //返回宽高\n          scrollOffset: true, //返回 scrollLeft,scrollTop\n          properties: [\"scrollX\", \"scrollY\"], //监听属性名\n          computedStyle: [\"margin\", \"backgroundColor\"], //此处返回指定要返回的样式名\n        },\n        (node) => {\n          inputFeatureEditor = createEditor({\n            selector: node,\n            config: {\n              placeholder: \"Type here...\",\n              autoFocus: false,\n              MENU_CONF: {\n                uploadImage: {\n                  fieldName: \"your-file-name1\",\n                  base64LimitSize: 10 * 1024 * 1024, // 10M 以下插入 base64\n                },\n              },\n              onChange(editor) {\n                inputRichCtx = editor.getHtml();\n              },\n            },\n            html: inputRichCtx,\n          });\n        }\n      );\n\n      query.select(\"#editorToolbar\").fields(\n        {\n          id: true, //是否返回节点id\n          rect: false, //是否返回节点布局位置\n          dataset: true, //返回数据集\n          size: true, //返回宽高\n          scrollOffset: true, //返回 scrollLeft,scrollTop\n          properties: [\"scrollX\", \"scrollY\"], //监听属性名\n          computedStyle: [\"margin\", \"backgroundColor\"], //此处返回指定要返回的样式名\n        },\n        (node) => {\n          inputFeatureToolbar = createToolbar({\n            editor: inputFeatureEditor,\n            selector: node,\n            config: {},\n          });\n        }\n      );\n      // #endif\n    }\n    return {\n      scrollHandle,\n    };\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n$work_occupied_height: 54rpx + 26rpx + 80rpx + 28rpx + 64rpx;\n\n.ce_one_box_one {\n  width: 750rpx;\n  height: 100vh;\n}\n\n.top_hgap {\n  width: 750rpx;\n  height: 26rpx;\n}\n\n.ce_one_box_two {\n  width: 750rpx;\n  height: calc(100% - $work_occupied_height - var(--status-bar-height));\n  margin-top: 32rpx;\n  margin-bottom: 32rpx;\n  z-index: 2;\n}\n\n.ce_one_box_three {\n  width: 100%;\n  height: auto;\n}\n</style>\n","import MiniProgramPage from 'D:/Work/project/Uni-app/heartree/pages/mood/cedit.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","onMounted","onBeforeUnmount","getCurrentInstance","uni","createEditor","createToolbar"],"mappings":";;AAiCA,MAAK,aAAc,MAAW;AAI9B,MAAK,YAAaA,cAAAA,gBAAa;AAAA,EAC7B,MAAM;AAAA,EACN,YAAY,EAAE,WAAY;AAAA,EAC1B,QAAQ;AAEN,aAAS,eAAe;AAAA,IAExB;AAEA,QAAI,qBAAqB;AAEzB,QAAI,eAAe;AAEnBC,kBAAAA,UAAU,MAAM;AACd;IACF,CAAC;AAGDC,kBAAAA,gBAAgB,MAAM;AACpB,UAAI,sBAAsB,MAAM;AAC9B;AAAA,aACK;AACL,2BAAmB,KAAI;AACvB,mBAAW,MAAM;AACf,6BAAmB,QAAO;AAC1B,+BAAqB;AAAA,QAEtB,GAAE,GAAG;AAAA,MACR;AAAA,IACF,CAAC;AAED,aAAS,aAAa;AA4BpB,YAAM,WAAWC,cAAAA;AACjB,YAAM,QAAQC,cAAAA,MAAI,oBAAmB,EAAG,GAAG,SAAS,KAAK;AAEzD,YAAM,OAAO,iBAAiB,EAAE;AAAA,QAC9B;AAAA,UACE,IAAI;AAAA;AAAA,UACJ,MAAM;AAAA;AAAA,UACN,SAAS;AAAA;AAAA,UACT,MAAM;AAAA;AAAA,UACN,cAAc;AAAA;AAAA,UACd,YAAY,CAAC,WAAW,SAAS;AAAA;AAAA,UACjC,eAAe,CAAC,UAAU,iBAAiB;AAAA;AAAA,QAC5C;AAAA,QACD,CAAC,SAAS;AACR,+BAAqBC,cAAAA,IAAa;AAAA,YAChC,UAAU;AAAA,YACV,QAAQ;AAAA,cACN,aAAa;AAAA,cACb,WAAW;AAAA,cACX,WAAW;AAAA,gBACT,aAAa;AAAA,kBACX,WAAW;AAAA,kBACX,iBAAiB,KAAK,OAAO;AAAA;AAAA,gBAC9B;AAAA,cACF;AAAA,cACD,SAAS,QAAQ;AACf,+BAAe,OAAO;cACvB;AAAA,YACF;AAAA,YACD,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA;AAGF,YAAM,OAAO,gBAAgB,EAAE;AAAA,QAC7B;AAAA,UACE,IAAI;AAAA;AAAA,UACJ,MAAM;AAAA;AAAA,UACN,SAAS;AAAA;AAAA,UACT,MAAM;AAAA;AAAA,UACN,cAAc;AAAA;AAAA,UACd,YAAY,CAAC,WAAW,SAAS;AAAA;AAAA,UACjC,eAAe,CAAC,UAAU,iBAAiB;AAAA;AAAA,QAC5C;AAAA,QACD,CAAC,SAAS;AACcC,4BAAc;AAAA,YAClC,QAAQ;AAAA,YACR,UAAU;AAAA,YACV,QAAQ,CAAE;AAAA,UACZ,CAAC;AAAA,QACH;AAAA;IAGJ;AACA,WAAO;AAAA,MACL;AAAA;EAEH;AACH,CAAC;;;;;;;;;;;;;;ACzJD,GAAG,WAAW,eAAe;"}