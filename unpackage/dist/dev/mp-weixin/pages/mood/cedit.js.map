{"version":3,"file":"cedit.js","sources":["../../../../../../pages/mood/cedit.vue","../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbW9vZC9jZWRpdC52dWU"],"sourcesContent":["<template>\n  <view class=\"col_nw_fs_center ce_container\">\n    <RjTopNavBack :isBlueMode=\"true\"></RjTopNavBack>\n    <view class=\"top_hgap\"></view>\n    <view\n      class=\"col_nw_fs_fs ce_wraper red_debug\"\n      scroll-y=\"true\"\n      show-scrollbar=\"false\"\n    >\n      <view class=\"col_nw_fs_center ce_first red_debug\">\n        <view class=\"row_nw_fs_center ce_first_one\">\n          <text class=\"row_nw_fs_center ce_first_label\">记一记</text>\n        </view>\n        <view class=\"row_nw_fs_center ce_first_two\">\n          <textarea\n            v-model=\"states.content\"\n            :maxlength=\"99999\"\n            class=\"ce_first_textarea\"\n            placeholder-style=\"color:#F76260\"\n            placeholder=\"占位符字体是红色的\"\n            cursor-color=\"#F76260\"\n            :auto-height=\"true\"\n          ></textarea>\n        </view>\n      </view>\n\n      <!-- #ifdef MP-WEIXIN || H5 || APP-PLUS -->\n      <view class=\"col_nw_fs_center ce_first red_debug\">\n        <view class=\"row_nw_fs_center ce_first_one\">\n          <text class=\"row_nw_fs_center ce_first_label\">说一说</text>\n        </view>\n        <view v-if=\"states.hasRecord\">\n          <button v-if=\"states.recordPause\" type=\"primary\">继续</button>\n          <button v-else type=\"primary\">暂停</button>\n\n          <button type=\"warn\">停止</button>\n          <button type=\"warn\">播放</button>\n          <button type=\"warn\">重录</button>\n        </view>\n        <view v-else>\n          <button type=\"primary\" @click=\"\">录音</button>\n        </view>\n      </view>\n      <!-- #endif -->\n\n      <view class=\"col_nw_fs_center ce_first\">\n        <view class=\"row_nw_fs_center ce_first_one\">\n          <text class=\"row_nw_fs_center ce_first_label\">心情色</text>\n        </view>\n        <view class=\"row_nw_center_center ce_first_three\">\n          <RjColorPickerSketch v-model:value=\"states.colors\"></RjColorPickerSketch>\n        </view>\n      </view>\n\n      <view class=\"col_nw_fs_center ce_first\">\n        <view class=\"row_nw_fs_center ce_first_one\">\n          <text class=\"row_nw_fs_center ce_first_label\">心情分</text>\n        </view>\n        <view class=\"ce_first_four\">\n          <slider\n            min=\"0\"\n            max=\"10\"\n            value=\"8\"\n            step=\"1\"\n            show-value\n            @change=\"sliderChange\"\n            activeColor=\"#FFCC33\"\n            backgroundColor=\"#000000\"\n            block-color=\"#8A6DE9\"\n            block-size=\"20\"\n          />\n        </view>\n      </view>\n\n      <view class=\"col_nw_fs_center ce_first\">\n        <view class=\"row_nw_fs_center ce_first_one\">\n          <text class=\"row_nw_fs_center ce_first_label\">心情仪式</text>\n        </view>\n        <view class=\"col_nw_fs_center ce_first_five\">\n          <view class=\"row_nw_fs_fs ce_rituals\">\n            <view\n              class=\"col_nw_fs_center ce_ritual_ibox\"\n              v-for=\"(item, index) in rituals\"\n              :key=\"item.id\"\n              @click=\"ritualsHandler(item,index)\"\n            >\n              <view class=\"row_nw_center_center ce_ritual_img\">\n                <image class=\"ce_ritual_show\" mode=\"aspectFit\" :src=\"item.image\"></image>\n              </view>\n              <view class=\"row_nw_center_center ce_ritual_label\">{{ item.label }}</view>\n            </view>\n          </view>\n          <view class=\"row_nw_fs_fs ce_ceremony\">{{\n            rituals[states.ritualIndex].ceremonys[states.cereIndex]\n          }}</view>\n          <view class=\"row_nw_fs_fs ce_tips\"> {{ rituals[states.ritualIndex].tip }} </view>\n        </view>\n      </view>\n\n      <view class=\"row_nw_center_center ce_act red_debug\">\n        <button type=\"primary\"plain @click=\"\">放弃</button>\n        <button type=\"primary\" @click=\"\">仪式开始</button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport {\n  defineComponent,\n  reactive,\n  onBeforeUnmount,\n  ref,\n  shallowRef,\n  onMounted,\n  getCurrentInstance,\n} from \"vue\";\n\nimport RjTopNavBack from \"@/components/rj-navback/RjTopNavBack.vue\";\nimport RjZColorPicker from \"@/components/rj-color/rj-color-picker/RjColorPicker.vue\";\nimport RjColorPickerSketch from \"@/components/rj-color/rj-color-picker/RjColorPickerSketch.vue\";\n// import RjColorPicker from \"@/components/rj-color/RjColorPicker.vue\";\n// import RjEditor from \"@/components/rj-editor/rj-sp-editor/sp-editor.vue\";\n\nimport dogpng from \"@/assets/images/fake/dog.jpg\";\nimport catpng from \"@/assets/images/fake/cat.jpg\";\n\nexport default defineComponent({\n  name: \"Cedit\",\n  components: { RjTopNavBack, RjZColorPicker, RjColorPickerSketch },\n  setup() {\n    // #ifdef MP-WEIXIN || H5 || APP-PLUS\n    const instance = getCurrentInstance();\n    const query = uni.createSelectorQuery().in(instance.proxy);\n    // #endif\n\n    let currentPage = 0;\n    function scrollHandle() {\n      currentPage++;\n    }\n\n    const rituals = [\n      {\n        id: \"rituals_01\",\n        code: \"rituals_01\",\n        label: \"随飞去\",\n        hasPrice: true,\n        tip: \"随飞去的会再也找不到了\",\n        ceremonys: [\n          \"神呀！请让我的心情永远随飞去吧吧吧111\",\n          \"神呀！请让我的心情永远随飞去吧吧吧222\",\n          \"神呀！请让我的心情永远随飞去吧吧吧333\",\n          \"神呀！请让我的心情永远随飞去吧吧吧444\",\n          \"神呀！请让我的心情永远随飞去吧吧吧555\",\n          \"神呀！请让我的心情永远随飞去吧吧吧666\",\n          \"神呀！请让我的心情永远随飞去吧吧吧777\",\n          \"神呀！请让我的心情永远随飞去吧吧吧888\",\n          \"神呀！请让我的心情永远随飞去吧吧吧999\",\n          \"神呀！请让我的心情永远随飞去吧吧吧000\",\n        ],\n        image: dogpng,\n      },\n      {\n        id: \"rituals_02\",\n        code: \"rituals_02\",\n        label: \"黑洞里\",\n        hasPrice: true,\n        tip: \"随飞去的会再也找不到了\",\n        ceremonys: [\n          \"111神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"222神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"333神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"444神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"555神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"666神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"777神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"888神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"999神呀！让这糟糕的心情永远滚进黑洞里吧\",\n          \"000神呀！让这糟糕的心情永远滚进黑洞里吧\",\n        ],\n        image: catpng,\n      },\n      {\n        id: \"rituals_03\",\n        code: \"rituals_03\",\n        label: \"记下来\",\n        hasPrice: false,\n        tip: \"记下来随时回味回味\",\n        ceremonys: [\n          \"111神呀！记下来随时回味回味\",\n          \"222神呀！记下来随时回味回味\",\n          \"333神呀！记下来随时回味回味\",\n          \"444神呀！记下来随时回味回味\",\n          \"555神呀！记下来随时回味回味\",\n        ],\n        image: dogpng,\n      },\n    ];\n\n    let states = reactive({\n      content: \"\",\n      hasRecord: false,\n      record: null,\n      recordPause: false,\n      colors: {\n        hex: \"#7ED321\",\n      },\n      ritualIndex: 0,\n      cereIndex: 0,\n    });\n\n    onMounted(() => {\n      // #ifdef MP-WEIXIN || MP-BAIDU || MP-TOUTIAO\n      initRecord();\n      // #endif\n    });\n\n    // 组件销毁时，也及时销毁编辑器\n    onBeforeUnmount(() => {});\n\n    // #ifdef MP-WEIXIN || MP-BAIDU || MP-TOUTIAO || APP-PLUS\n    let recorderManager = null;\n    let innerAudioContext = null;\n\n    function initRecord() {\n      let hasRecordAuth = false;\n      // 1 先判断有没有权限\n      // #ifdef MP-WEIXIN || MP-BAIDU || MP-TOUTIAO\n      uni.authorize({\n        scope: \"scope.record\",\n        success() {\n          hasRecordAuth = true;\n        },\n        fail: () => {\n          uni.openSetting({\n            success(res) {\n              console.log(\"打开小程序设置 成功\");\n            },\n            fail: (err) => {\n              console.log(\"打开小程序设置 失败\");\n            },\n          });\n        },\n      });\n      // #endif\n\n      // #ifdef APP-PLUS || WEB || H5\n      uni.openAppAuthorizeSetting({\n        success(res) {\n          console.log(\"openAppAuthorizeSetting success\", res);\n        },\n        fail: (err) => {\n          console.log(\"openAppAuthorizeSetting fail\", res);\n        },\n        complete: () => {\n          console.log(\"openAppAuthorizeSetting complete\", res);\n        },\n      });\n      // #endif\n\n      if (hasRecordAuth == true) {\n        recorderManager = uni.getRecorderManager();\n        innerAudioContext = uni.createInnerAudioContext();\n\n        if (innerAudioContext) {\n          innerAudioContext.autoplay = true;\n        }\n\n        if (recorderManager) {\n          recorderManager.onStop((res) => {\n            console.log(\"recorder stop\" + JSON.stringify(res));\n            states.record = res.tempFilePath;\n          });\n        }\n      }\n    }\n\n    function startRecord() {\n      if (recorderManager) {\n        console.log(\"开始录音\");\n\n        recorderManager.start();\n      }\n    }\n\n    function endRecord() {\n      if (recorderManager) {\n        console.log(\"录音结束\");\n        recorderManager.stop();\n      }\n    }\n\n    function playVoice() {\n      if (recorderManager) {\n        console.log(\"播放录音\");\n\n        if (states.record) {\n          innerAudioContext.src = states.record;\n          innerAudioContext.play();\n        }\n      }\n    }\n    // #endif\n\n    function sliderChange(e) {\n      console.log(\"value 发生变化：\" + e.detail.value);\n    }\n\n    function ritualsHandler(ritual, index) {\n\n      states.ritualIndex = index;\n      let length = rituals[index].ceremonys.length-1;\n      let randIndex = Math.ceil((Math.random()* 100)%length)\n      states.cereIndex = randIndex;\n      console.log(\"ritualsHandler\", ritual, index, length, randIndex)\n    }\n\n    return {\n      rituals,\n      scrollHandle,\n      states,\n      sliderChange,\n      ritualsHandler,\n    };\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/assets/style/vars.scss\";\n$work_occupied_height: 54rpx + 26rpx + 80rpx + 28rpx + 64rpx;\n\n.ce_container {\n  width: 750rpx;\n  height: 100vh;\n}\n\n.top_hgap {\n  width: 750rpx;\n  height: 26rpx;\n}\n\n.ce_wraper {\n  width: 750rpx;\n  height: calc(100% - $work_occupied_height - var(--status-bar-height));\n  margin-top: 32rpx;\n  margin-bottom: 32rpx;\n  z-index: 2;\n}\n\n.ce_first {\n  width: 100%;\n  height: auto;\n  margin-bottom: 64rpx;\n}\n\n.ce_first_one {\n  width: 718rpx;\n  height: 64rpx;\n}\n\n.ce_first_label {\n  width: 100%;\n  height: 100%;\n  font-size: $fs_32rpx;\n  font-weight: bold;\n}\n\n.ce_first_two {\n  width: 718rpx;\n  height: auto;\n  min-height: 320rpx;\n  border: 1px solid $c_033_033_033_020;\n  border-radius: 8rpx;\n}\n\n.ce_first_textarea {\n  width: 100%;\n  height: auto;\n  min-height: 320rpx;\n  font-size: $fs_28rpx;\n}\n\n.ce_first_four {\n  width: 718rpx;\n  height: 80rpx;\n}\n\n.ce_first_five {\n  width: 718rpx;\n  height: auto;\n}\n\n.ce_rituals {\n  width: 100%;\n  height: auto;\n  margin-bottom: 32rpx;\n}\n\n.ce_ritual_ibox {\n  width: 218rpx;\n  height: auto;\n  margin-right: 32rpx;\n  cursor: pointer;\n}\n\n.ce_ritual_img {\n  width: 218rpx;\n  height: 218rpx;\n  margin-bottom: 8rpx;\n  border-radius: 50%;\n}\n\n.ce_ritual_show {\n  width: 70%;\n  height: 70%;\n  border-radius: 50%;\n}\n\n.ce_ritual_label {\n  width: 218rpx;\n  height: 32rpx;\n  font-size: $fs_24rpx;\n}\n\n.ce_ceremony {\n  width: 718rpx;\n  height: auto;\n  min-height: 32rpx;\n  margin-bottom: 16rpx;\n  font-size: $fs_18rpx;\n}\n\n.ce_tips {\n  width: 718rpx;\n  height: auto;\n  font-size: $fs_10rpx;\n  margin-bottom: 16rpx;\n}\n\n.ce_act {\n  width: 718rpx;\n  height: 48rpx;\n  margin-bottom: 64rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/rj/work/uniapp/heartree/pages/mood/cedit.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","getCurrentInstance","uni","dogpng","catpng","reactive","onMounted","onBeforeUnmount"],"mappings":"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"}